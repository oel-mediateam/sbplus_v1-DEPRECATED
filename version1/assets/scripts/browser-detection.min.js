/*
 * Browser Detection
 * Â© 2010 DevSlide Labs
 * Visit us at: www.devslide.com/labs
 */var notSupportedBrowsers=[],displayPoweredBy=!1,noticeLang="professional",noticeLangCustom=null,supportedBrowsers=[],BrowserDetection={init:function(){if(notSupportedBrowsers===null||notSupportedBrowsers.length<1)notSupportedBrowsers=this.defaultNotSupportedBrowsers;this.detectBrowser();this.detectOS();if(this.browser===""||this.browser==="Unknown"||this.os===""||this.os==="Unknown"||this.browserVersion===""||this.browserVersion===0)return;var e=!1;for(var t=0;t<notSupportedBrowsers.length;t++)if(notSupportedBrowsers[t].os==="Any"||notSupportedBrowsers[t].os===this.os)if(notSupportedBrowsers[t].browser==="Any"||notSupportedBrowsers[t].browser===this.browser)if(notSupportedBrowsers[t].version==="Any"||this.browserVersion<=parseFloat(notSupportedBrowsers[t].version)){e=!0;break}e&&this.displayNotice()},getEl:function(e){return window.document.getElementById(e)},getElSize:function(e){var t=this.getEl(e);return t===null?null:{width:parseInt(t.offsetWidth),height:parseInt(t.offsetHeight)}},getWindowSize:function(){return typeof window.innerWidth!="undefined"?{width:parseInt(window.innerWidth),height:parseInt(window.innerHeight)}:window.document.documentElement.clientWidth!==0?{width:parseInt(window.document.documentElement.clientWidth),height:parseInt(window.document.documentElement.clientHeight)}:{width:parseInt(window.document.body.clientWidth),height:parseInt(window.document.body.clientHeight)}},positionNotice:function(){var e=this.getElSize("browser-detection"),t=this.getWindowSize(),n=this.getEl("browser-detection");if(n===null||e===null||t===null||!t.width||!t.height)return;n.style.left=(t.width-e.width)/2+"px";n.style.top=(t.height-e.height-20)/2+"px";this.noticeHeight=e.height},displayNotice:function(){if(this.readCookie("bdnotice")===1)return;this.writeNoticeCode();this.positionNotice();var e=this;window.onresize=function(){e.positionNotice()};this.browser==="MSIE"&&this.browserVersion<7&&(window.onscroll=function(){e.positionNotice()});this.getEl("browser-detection-close").onclick=function(){e.remindMe(!1)};this.getEl("browser-detection-remind-later").onclick=function(){e.remindMe(!1)}},remindMe:function(e){this.writeCookie("bdnotice",1,e===!0?365:7);this.getEl("browser-detection").style.display="none";this.getEl("black_overlay").style.display="none"},writeCookie:function(e,t,n){var r="";if(parseInt(n)>0){var i=new Date;i.setTime(i.getTime()+parseInt(n)*24*60*60*1e3);r="; expires="+i.toGMTString()}document.cookie=e+"="+t+r+"; path=/"},readCookie:function(e){if(!document.cookie)return"";var t=e+"=",n=document.cookie.split(";");for(var r=0;r<n.length;r++){while(n[r].charAt(0)===" ")n[r]=n[r].substring(1,n[r].length);if(n[r].indexOf(t)===0)return n[r].substring(t.length,n[r].length)}return""},writeNoticeCode:function(){var title="",notice="",selectBrowser="",remindMeLater="",browsersList=null,code='<div id="black_overlay"></div><div id="browser-detection"><a href="javascript:;" id="browser-detection-close">Close</a>';if(noticeLang==="custom"&&noticeLangCustom!==null){title=noticeLangCustom.title;notice=noticeLangCustom.notice;selectBrowser=noticeLangCustom.selectBrowser;remindMeLater=noticeLangCustom.remindMeLater}else{var noticeTextObj=null;eval("noticeTextObj = this.noticeText."+noticeLang+";");noticeTextObj||(noticeTextObj=this.noticeText.professional);title=noticeTextObj.title;notice=noticeTextObj.notice;selectBrowser=noticeTextObj.selectBrowser;remindMeLater=noticeTextObj.remindMeLater}notice=notice.replace("\n",'</p><p class="bd-notice">');notice=notice.replace("{browser_name}",this.browser+" "+this.browserVersion);code+='<p class="bd-title">'+title+'</p><p class="bd-notice">'+notice+'</p><p class="bd-notice"><b>'+selectBrowser+"</b></p>";supportedBrowsers.length>0?browsersList=supportedBrowsers:browsersList=this.supportedBrowsers;code+='<ul class="bd-browsers-list">';for(var i=0;i<browsersList.length;i++)code+='<li class="'+browsersList[i].cssClass+'"><a href="'+browsersList[i].downloadUrl+'" target="_blank">'+browsersList[i].name+"</a></li>";code+="</ul>";displayPoweredBy&&(code+='<div class="bd-poweredby">Powered by <a href="http://www.devslide.com/labs/browser-detection" target="_blank">DevSlide Labs</a></div>');code+='<ul class="bd-skip-buttons">';code+='<li><button id="browser-detection-remind-later" type="button">'+remindMeLater+"</button></li>";code+="</ul>";code+="</div>";window.document.body.innerHTML+=code},detectBrowser:function(){this.browser="";this.browserVersion=0;if(/Opera[\/\s](\d+\.\d+)/.test(navigator.userAgent))this.browser="Opera";else if(/MSIE (\d+\.\d+);/.test(navigator.userAgent))this.browser="MSIE";else if(/Navigator[\/\s](\d+\.\d+)/.test(navigator.userAgent))this.browser="Netscape";else if(/Chrome[\/\s](\d+\.\d+)/.test(navigator.userAgent))this.browser="Chrome";else if(/Safari[\/\s](\d+\.\d+)/.test(navigator.userAgent)){this.browser="Safari";/Version[\/\s](\d+\.\d+)/.test(navigator.userAgent);this.browserVersion=Number(RegExp.$1)}else/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)&&(this.browser="Firefox");this.browser===""?this.browser="Unknown":this.browserVersion===0&&(this.browserVersion=parseFloat(Number(RegExp.$1)))},detectOS:function(){for(var e=0;e<this.operatingSystems.length;e++)if(this.operatingSystems[e].searchString.indexOf(this.operatingSystems[e].subStr)!==-1){this.os=this.operatingSystems[e].name;return}this.os="Unknown"},noticeHeight:0,browser:"",os:"",browserVersion:"",supportedBrowsers:[{cssClass:"firefox",name:"Mozilla Firefox",downloadUrl:"https://www.mozilla.org/en-US/"},{cssClass:"chrome",name:"Google Chrome",downloadUrl:"https://www.google.com/intl/en/chrome/browser/"},{cssClass:"msie",name:"Internet Explorer",downloadUrl:"http://windows.microsoft.com/en-us/internet-explorer/browser-ie"},{cssClass:"opera",name:"Opera",downloadUrl:"http://www.opera.com/"},{cssClass:"safari",name:"Apple Safari",downloadUrl:"http://www.apple.com/safari/"}],operatingSystems:[{searchString:navigator.platform,name:"Windows",subStr:"Win"},{searchString:navigator.platform,name:"Mac",subStr:"Mac"},{searchString:navigator.platform,name:"Linux",subStr:"Linux"},{searchString:navigator.userAgent,name:"iPhone",subStr:"iPhone/iPod"}],defaultNotSupportedBrowsers:[{os:"Any",browser:"MSIE",version:8}],noticeText:{professional:{title:"Outdated Browser Detected",notice:"Our web application has detected that you are using an outdated browser. Using your current browser will prevent you from accessing and interacting with our web application. An upgrade is strongly recommended.",selectBrowser:"Use the links below to download a new browser or upgrade your existing browser.",remindMeLater:"Okay, remind me later",neverRemindAgain:"No, don't remind me again"}}};window.onload=function(){BrowserDetection.init()};